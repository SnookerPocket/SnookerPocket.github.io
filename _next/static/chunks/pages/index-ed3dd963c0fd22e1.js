(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7569)}])},7569:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return u}});var n=t(5893),i=t(2459),l=t(7294),d=t(7481);function r(e){let{seizoen_id:s}=e;console.log("seizoen_id in klassementSeizoen",s);let[t,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{s&&(0,d.xR)(s).then(e=>Promise.all(e.map(e=>(0,d.PR)(e.user).then(s=>(e.user=s.username,e))))).then(e=>{i(e)}).catch(e=>{console.error(e.message)})},[s]),(0,n.jsxs)(n.Fragment,{children:[console.log("klassement",t),t.length>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)("div",{className:"panelKlassement",children:(0,n.jsxs)("div",{className:"klassementSpeeldag",children:[(0,n.jsx)("h1",{children:"Klassement Seizoen"}),(0,n.jsxs)("table",{className:"styled-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Plaats"}),(0,n.jsx)("th",{children:"Naam"}),(0,n.jsx)("th",{children:"Score"})]})}),(0,n.jsx)("tbody",{children:t.map(e=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.plaats}),(0,n.jsx)("td",{children:e.user}),(0,n.jsx)("td",{children:e.score})]},e._id))})]})]})})})}),0===t.length&&(0,n.jsx)("p",{children:"Geen seizoen klassement beschikbaar"})]})}function a(e){let[s,t]=(0,l.useState)([]),[i,r]=(0,l.useState)([]),[a,c]=(0,l.useState)(!0);return(console.log("speeldagID",e.speeldag_id),(0,l.useEffect)(()=>{(0,d.Rz)().then(s=>(t(s),(0,d.Xz)(e.speeldag_id))).then(e=>Promise.all(e.map(e=>(0,d.PR)(e.user).then(s=>(e.user=s.username,e))))).then(e=>{r(e)}).catch(e=>{console.error(e.message)}).finally(()=>{c(!1)})},[e.speeldag_id]),a)?(0,n.jsx)("p",{children:"Loading..."}):(0,n.jsxs)(n.Fragment,{children:[i&&i.length>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)("div",{className:"panelKlassement",children:(0,n.jsxs)("div",{className:"klassementSpeeldag",children:[(0,n.jsx)("h1",{children:"Klassement Speeldag"}),(0,n.jsxs)("table",{className:"styled-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Plaats"}),(0,n.jsx)("th",{children:"Naam"}),(0,n.jsx)("th",{children:"Score"}),(0,n.jsx)("th",{children:"Heeft joker gebruikt"})]})}),(0,n.jsx)("tbody",{children:i.map(e=>(0,n.jsxs)(n.Fragment,{children:[console.log("item",e),(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.plaats}),(0,n.jsx)("td",{children:e.user}),(0,n.jsx)("td",{children:e.score}),(0,n.jsx)("td",{children:e.jokerGebruikt?"Ja":"Nee"})]},e._id)]}))})]})]})})})}),i&&0===i.length&&(0,n.jsx)("p",{children:"Geen speeldagKlassement beschikbaar"})]})}function c(e){let{onClick:s,speeldagen:t}=e,[i,d]=(0,l.useState)(null),r=e=>{s(e),d(s=>s===e?null:e)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{id:"seizoenTitle",children:"Seizoen 24-25"}),(0,n.jsx)("ul",{id:"speeldagenList",children:t.map((e,s)=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{onClick:()=>r(s),style:i===s?{backgroundColor:"green"}:null,children:["Speeldag ",s+1]})},s))})]})}function o(e){let{speeldag_id:s}=e,[t,i]=(0,l.useState)({speeldag:null,loading:!0,error:null,selectedOptions:[],jokerChecked:!1,schiftingsAntwoord:"",speeldagVoteID:{}});(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,d.iV)(s);i(s=>({...s,speeldag:e,loading:!1,error:null})),await r()}catch(e){console.error(e),i(e=>({...e,loading:!1,error:"Error fetching data"}))}})()},[s]);let r=async()=>{try{let e=await (0,d.te)(s);i(s=>({...s,speeldagVoteID:e._id,jokerChecked:e.jokerGebruikt,schiftingsAntwoord:e.SchiftingsvraagAntwoord})),e.wedstrijdVotes&&e.wedstrijdVotes.length>0&&e.wedstrijdVotes.forEach(e=>{a(e.wedstrijd._id,e.vote,e._id)})}catch(e){console.error(e),i(e=>({...e,loading:!1,error:"Error fetching data"}))}},a=(e,s,t)=>{i(n=>{let i=n.selectedOptions.findIndex(s=>s.wedstrijd===e);if(-1===i)return{...n,selectedOptions:[...n.selectedOptions,{_id:t,vote:s,wedstrijd:e}]};{let e=[...n.selectedOptions];return e[i]={...e[i],vote:s},{...n,selectedOptions:e}}})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"speeldagTitel",children:"Speeldag"}),t.loading&&!t.speeldag?(0,n.jsx)("div",{children:"Loading..."}):t.error?(0,n.jsxs)("div",{children:["Error: ",t.error]}):(0,n.jsx)(n.Fragment,{children:t.speeldag&&(0,n.jsx)(n.Fragment,{children:new Date(t.speeldag.eindDatum)<new Date?(0,n.jsx)(h,{state:t,handleOptionChange:a,onJokerChange:e=>{i(s=>({...s,jokerChecked:e.target.checked}))},onSchiftingsVraagChange:e=>{i(s=>({...s,schiftingsAntwoord:e.target.value}))}}):(0,n.jsx)(g,{state:t})})})]})})}t(7855),t(9664);let h=e=>{let{state:s,handleOptionChange:t,onJokerChange:i,onSchiftingsVraagChange:r}=e,[a,c]=(0,l.useState)(!1),[o,h]=(0,l.useState)(null),[j,g]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("userID"),s=await (0,d.PR)(e);p(!!s.betaald)}catch(e){console.error("Failed to get user:",e.message)}})()},[]);let m=async()=>{try{c(!0);let e={wedstrijdVotes:s.selectedOptions};s.speeldagVoteID?await (0,d.nl)(e,s.speeldagVoteID):(e.jokerGebruikt=s.jokerChecked,e.SchiftingsvraagAntwoord=s.schiftingsAntwoord,await (0,d.hu)(e,s.speeldag._id)),c(!1),g(!0)}catch(e){console.error("Failed to post speeldag:",e.message),c(!1),h(e.message)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("table",{style:{width:"100%"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Match"}),(0,n.jsx)("th",{children:"Winst ploeg 1"}),(0,n.jsx)("th",{children:"Gelijkspel"}),(0,n.jsx)("th",{children:"Winst ploeg 2"})]})}),(0,n.jsx)("tbody",{children:u?s.speeldag.wedstrijden.map(e=>{var i,l,d;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsxs)("span",{children:[e.thuis," - ",e.uit]})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"radio",value:"1",checked:(null===(i=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===i?void 0:i.vote)==="1",onChange:()=>t(e._id,"1")})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"radio",value:"x",checked:(null===(l=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===l?void 0:l.vote)==="x",onChange:()=>t(e._id,"x")})}),(0,n.jsx)("td",{children:(0,n.jsx)("input",{type:"radio",value:"2",checked:(null===(d=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===d?void 0:d.vote)==="2",onChange:()=>t(e._id,"2")})})]},e._id)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",children:"Je kan niet stemmen wat je hebt nog niet betaald."})})})]}),(0,n.jsx)(x,{state:s,onJokerChange:i,onSchiftingsVraagChange:r}),a&&(0,n.jsx)("p",{children:"Submitting..."}),o&&(0,n.jsxs)("p",{children:["Error: ",o]}),j&&(0,n.jsx)("p",{children:"Submission successful!"}),(0,n.jsx)("button",{onClick:m,children:"Submit"})]})},j=e=>{let{schiftingsvraag:s,schiftingsAntwoord:t,jokerChecked:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["Schiftingsvraag: ",s]}),(0,n.jsxs)("p",{children:["jouw antwoord: ",t]}),(0,n.jsxs)("p",{children:["joker gebruikt: ",(0,n.jsx)("input",{type:"checkbox",checked:i||!1})]})]})},x=e=>{let{state:s,onJokerChange:t,onSchiftingsVraagChange:i}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"vul schiftingsvraag in"}),(0,n.jsxs)("div",{className:"jokerContainer checkbox-wrapper-13",children:[(0,n.jsx)("label",{htmlFor:"c1-13",children:"Gebruik joker?"}),(0,n.jsx)("input",{type:"checkbox",id:"c1-13",checked:s.jokerChecked,onChange:t})]}),(0,n.jsxs)("div",{className:"schiftingsContainer",children:[(0,n.jsx)("h4",{children:"Schiftingsvraag:"}),(0,n.jsx)("label",{htmlFor:"schiftingsvraag",children:s.speeldag.schiftingsvraag}),(0,n.jsx)("input",{type:"number",min:"0",max:"10000",id:"schiftingsAntwoord",defaultValue:s.schiftingsAntwoord,onChange:i,required:!0})]})]})},g=e=>{let{state:s}=e;console.log(s.selectedOptions);let t=(e,s,t)=>{let i;return console.log(e,s,t),i=e===(null==s?void 0:s.toUpperCase())&&e===t?"green":e!==(null==s?void 0:s.toUpperCase())&&(null==s?void 0:s.toUpperCase())===t?"blue":e!==(null==s?void 0:s.toUpperCase())&&e===t?"red":"gray",(0,n.jsx)("span",{style:{backgroundColor:i,borderRadius:"50%",display:"inline-block",width:"15px",height:"15px",marginLeft:"0px"}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Resultaten"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,n.jsxs)("p",{style:{marginRight:"10px"},children:[t("1","1","1"),": juist gestemd"]}),(0,n.jsxs)("p",{style:{marginRight:"10px"},children:[t("1","2","1"),": mis gestemd antwoord"]}),(0,n.jsxs)("p",{children:[t("1","2","2"),": jouw misse stem"]})]}),(0,n.jsxs)("table",{style:{width:"100%"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Match"}),(0,n.jsx)("th",{children:"Winst ploeg 1"}),(0,n.jsx)("th",{children:"Gelijkspel"}),(0,n.jsx)("th",{children:"Winst ploeg 2"})]})}),(0,n.jsx)("tbody",{children:s.speeldag.wedstrijden?s.speeldag.wedstrijden.map(e=>{var i,l,d;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsxs)("span",{children:[e.thuis," - ",e.uit]})}),(0,n.jsx)("td",{children:t(e.resultaat,null===(i=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===i?void 0:i.vote,"1")}),(0,n.jsx)("td",{children:t(e.resultaat,null===(l=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===l?void 0:l.vote,"X")}),(0,n.jsx)("td",{children:t(e.resultaat,null===(d=s.selectedOptions.find(s=>s.wedstrijd===e._id))||void 0===d?void 0:d.vote,"2")})]},e._id)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:"4",children:"Je kan niet stemmen wat je hebt nog niet betaald."})})})]}),(0,n.jsx)(j,{schiftingsvraag:s.speeldag.schiftingsvraag,schiftingsAntwoord:s.schiftingsAntwoord,jokerChecked:s.jokerChecked})]})};function u(){let[e,s]=(0,l.useState)(!0),[t,h]=(0,l.useState)(0),[j,x]=(0,l.useState)(!0),[g,u]=(0,l.useState)([]);return(0,l.useEffect)(()=>{(0,d.Rz)().then(e=>{u(e)}).catch(e=>{console.error(e.message)})},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.Z,{children:(0,n.jsxs)("div",{className:"pageContainer",children:[(0,n.jsx)("div",{className:"smallColumn",children:(0,n.jsx)(c,{onClick:function(e){h(e),x(!1),s(!1)},speeldagen:g})}),(0,n.jsxs)("div",{className:"column flexColumn",children:[(0,n.jsxs)("div",{className:"panelNav",children:[(0,n.jsx)("button",{onClick:()=>s(!0),style:{backgroundColor:e?"#bc6c25":"#dda15e"},children:"Klassement"}),(0,n.jsx)("button",{onClick:()=>s(!1),style:{backgroundColor:e?"#dda15e":"#bc6c25"},children:"Wedstrijd"})]}),(0,n.jsxs)("div",{children:[console.log("speeldagen",g.seizoenID),j?(0,n.jsx)(r,{seizoen_id:g.seizoenID}):(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)(a,{speeldag_id:g[t]._id}):(0,n.jsx)(o,{speeldag_id:g[t]._id})})]})]})]})})})}t(3275)},3275:function(){},7855:function(){}},function(e){e.O(0,[61,321,232,888,774,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);